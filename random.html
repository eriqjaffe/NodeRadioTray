<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <title>NodeRadioTray Station Editor</title>
    <script>
      if (typeof module === 'object') {window.module = module; module = undefined;}
      const { ipcRenderer } = require("electron");
    </script>
    <script type="text/javascript" src="./scripts/jquery-1.11.3.min.js"></script>
    <link href="./scripts/style.css" rel="stylesheet" type='text/css'/>
  </head>
  <body style="padding:10px!important; overflow:hidden!important;">
    <label>Country:</label><br>
    <input type="text" id="countryList" list="countries" value="Any" style="width: 95%;">
        <datalist id="countries">
        </datalist>
        <br><br>
    <label>Language:</label><br>
    <input type="text" id="langList" list="langs" value="Any" style="width: 95%;">
        <datalist id="langs">
        </datalist>
        <br><br>
    <label>Tag:</label><br>
    <input type="text" id="tagList" list="tags" value="Any" style="width: 95%;">
        <datalist id="tags">
        </datalist><br><br>
    <div style="width:100%; text-align: center;">
    <input type="button" value="Submit" id="submit">
    </div>
  </body>
  <script>
    ipcRenderer.send('get-radio-browser-stuff', null)

    ipcRenderer.on('get-radio-browser-stuff-response', (event, data) => {
      $("#countries").empty()
      $("#langs").empty()
      $("#tags").empty()
      data.countries.forEach(function(country) {
        $('<option>').val(country).appendTo($("#countries"));
      });
      data.languages.forEach(function(lang) {
        $('<option>').val(lang).appendTo($("#langs"));
      });
      data.tags.forEach(function(tag) {
        $('<option>').val(tag).appendTo($("#tags"));
      });
    })

    $("#submit").on("click", function(e) {
      e.preventDefault()
      ipcRenderer.send('find-random-station', {country: $("#countryList").val(), language: $("#langList").val(), tag: $("#tagList").val()})
    })
  </script>
</html>